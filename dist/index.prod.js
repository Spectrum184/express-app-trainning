"use strict";require("dotenv").config();var express=require("express"),userRoute=require("./routes/user.route"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),authRoute=require("./routes/auth.route"),cartRoute=require("./routes/cart.route"),transferRoute=require("./routes/transfer.route"),csurf=require("csurf"),mongoose=require("mongoose"),authMiddleware=require("./middleware/auth.middleware"),productRoute=require("./routes/product.route"),sessionMiddleware=require("./middleware/session.middleware"),port=3e3;mongoose.connect(process.env.MONGO_URL);var app=express();app.set("view engine","pug"),app.set("views","./views"),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!0})),app.use(cookieParser(process.env.SECRET_KEY)),app.use(sessionMiddleware),app.use(express.static("public")),app.use("/users",authMiddleware.requireAuth,userRoute),app.use("/auth",authRoute),app.use("/cart",cartRoute),app.use("/products",authMiddleware.requireAuth,productRoute),app.use(csurf({cookie:!0})),app.use("/transfer",authMiddleware.requireAuth,transferRoute),app.get("/",function(e,r){return r.render("index",{name:"Thanh"})}),app.listen(port,function(){});